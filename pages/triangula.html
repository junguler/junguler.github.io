<!doctype html>
<html lang="en">

   <link href="../style.css" rel="stylesheet" type="text/css">

   <div class="pagebody">

<head>
    <meta charset="utf-8">
    <title>Triangula</title>
    <link rel="shortcut icon" type="image/ico" href="../favicon.ico"/>

</head>
 <!-- 
<img class="banner"  src="../stuff/p-banner.jpg" ><br>
-->
<nav>
  <ul class="nav">
    <li class="menu">
      <a href="../index.html">Home</a></li>&nbsp;</a>
      <li class="menu">
        <a href="second.html">&nbsp;Projects&nbsp;</a>
        <ul>
          <li><a href="asciipy.html">Ascii_py</a></li>
          <li><a href="asciimagec.html">Ascii-image-converter</a></li>
        <li><a href="gmic.html">G'mic</a></li>
        <li><a href="stylize.html">Stylize</a></li>
        <li><a href="geometrize.html">Geometrize</a></li>
        <li><a href="mosaic.html">Mosaic</a></li>
        <li><a href="primitive.html">Primitive</a></li>
        <li><a href="tiler.html">Tiler</a></li>
        <li><a href="triangle.html">Triangle</a></li>
        <li><a href="triangula.html">Triangula</a></li>
      </ul>
    </li>
  </ul>
</nav>
<br> <br> 

<body>

<h1>Triangula</h1>

<h2>what is needed to get started?</h2>
<p>Triangula is a gui and cli program that takes your image(s) make cool looking triangular and polygonal art out of them. find the github repo <a href="https://github.com/RH12503/triangula">here for gui</a> and <a href="https://github.com/RH12503/Triangula-CLI">here for cli</a> the cli version does not come pre-compiled and you have to install golang and compile it yourself, i’ll include the linux binary i’ve made for myself in this repo and if you have a macos or windows binary contact me to include it as well, i also started an issue in the cli repo and we might get official builds as well</p>

<h2>what are the differences betwwen triangula and triangle?</h2>
<p>these two programs look somewhat the same in first glance but there are enough difference to warrent both existing and we using them both in different cases, here are some of them:</p>
<p>
1- &nbsp;triangula tries to produce a more uniformed look with triangle sizes roughly the same size <br>
2- &nbsp;triangula does not overlap these triangles and only push them to different directions <br>
3- &nbsp;triangula wants to more closely recreate the image which makes it very slower than triangle <br>
4- &nbsp;triangula comes with gui option in addition to cli but triangle does not <br>
5- &nbsp;triangula has a two step process for recreating the image but triangle does it in 1 step <br>
6- &nbsp;triangula outpot images that more closely resemble low poly art we see in pop culture <br>
7- &nbsp;triangula’s outpots are more cleaner and need less points to be able to make out the image <br>
</p>
<p>triangula also gets compared to other programs like primitive and geometrize but i think this comparison is not valid as these programs are not meant to be used for the same purposes</p>
<h2>source material</h2>
<p>everything is downloaded from a royalty free image website <a href="https://free-images.com/">here</a></p>
<h2>gui version</h2>
<p>there is a gui version available with simplified usage <a href="https://github.com/RH12503/triangula/releases/tag/v1.2.0">here</a> while perfectly usable i’m more interested in the cli version as we want to be able to re-produce same types of results automatically and batch convert them</p>
<p><img src="https://user-images.githubusercontent.com/59083599/135850973-abd1274e-92f4-46f1-99cd-2a503739b552.jpg" alt="T_gui"></p>
<h2>explanation of the switches and how the program works</h2>
<p>triangula cli is made of two seperate sub commands, first one is <code>run</code> which takes your image and makes a json file out of the information inside it, this is the main step we are interested in, here are the switches for it</p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--img</code>,  <code>--image</code></td>
<td>n/a</td>
<td>the image file to triangulate</td>
</tr>
<tr>
<td><code>--out</code>,  <code>--output</code></td>
<td>n/a</td>
<td>the file to write output to</td>
</tr>
<tr>
<td><code>-p</code>,  <code>--points</code></td>
<td>300</td>
<td>the number of points to use in the triangulation</td>
</tr>
<tr>
<td><code>-s</code>,  <code>--shape</code></td>
<td>“triangles”</td>
<td>the type of shape to use, either triangles or polygons</td>
</tr>
<tr>
<td><code>-m</code>,  <code>--mut</code>, <code>--mutations</code></td>
<td>2</td>
<td>the number of mutations to make</td>
</tr>
<tr>
<td><code>-v</code>,  <code>--variation</code></td>
<td>0.3</td>
<td>the variation each mutation causes</td>
</tr>
<tr>
<td><code>--pop</code>,  <code>--size</code>, <code>--population</code></td>
<td>400</td>
<td>the population size in the algorithm</td>
</tr>
<tr>
<td><code>-c</code>,  <code>--cache</code></td>
<td>22</td>
<td>the cache size as a power of 2</td>
</tr>
<tr>
<td><code>-b</code>,  <code>--block</code></td>
<td>5</td>
<td>the size of the blocks used when rendering</td>
</tr>
<tr>
<td><code>--cut</code>,  <code>--cutoff</code></td>
<td>5</td>
<td>the size of the blocks used when rendering</td>
</tr>
<tr>
<td><code>-r</code>,  <code>--reps</code></td>
<td>500</td>
<td>the number of generations before saving to the output file</td>
</tr>
<tr>
<td><code>-t</code>,  <code>--threads</code></td>
<td>0</td>
<td>the number of threads to use or 0 to use all cores</td>
</tr>
</tbody>
</table>
<p>second step is <code>render</code> which takes the input image and applies the information from the json file to it and convert it to an svg or png picture, here are the switches for that</p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i</code>,  <code>--in</code>,  <code>--input</code></td>
<td>the .json file containing the points to be rendered</td>
</tr>
<tr>
<td><code>-o</code>,  <code>--out</code>,  <code>--output</code></td>
<td>the name of the file to be outputted</td>
</tr>
<tr>
<td><code>--img</code>,  <code>--image</code></td>
<td>the image to use</td>
</tr>
<tr>
<td><code>-s</code>,  <code>--shape</code></td>
<td>the type of shape to use, either triangles or polygons (default: “triangles”)</td>
</tr>
</tbody>
</table>
<h2>basic usage</h2>
<pre class="hljs"><code>triangula run -img bottle.jpg -out b.json
</code></pre>
<p>this process will go on forever, there is no end point which exits and we have to intrupt it manually with <code>ctrl + c</code>, by default every 500 generations (which are calculations triangula makes) saves the information to the json file</p>
<p><img class="verticalimg" src="https://user-images.githubusercontent.com/59083599/135856002-baa8d9ae-5ab9-4663-90cb-ff09a78860e9.jpg" alt="run+"></p>
<p>we can automate this with the <code>timeout</code> command, we just specify how long we want this command to last, let do it for 20 seconds</p>
<pre class="hljs"><code>timeout 20s triangula run -img bottle.jpg -out b.json
</code></pre>
<p>now render the image to png with render command</p>
<pre class="hljs"><code>triangula render -in b.json -out T-bottle -img bottle.jpg png 
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135856516-71402ea8-1d2f-45d1-ac68-7ab12fe96890.png" alt="bottle"></p>
<p>notice that we didn’t specify extension for our outpot image <code>T-bottle</code> as the program adds that automatically</p>
<p>here is a one liner of our two commands, lets also remove the json file as we don’t need it anymore</p>
<pre class="hljs"><code>timeout 20s triangula run -img bottle.jpg -out b.json ; triangula render -in b.json -out bottle -img bottle.jpg png ; rm b.json
</code></pre>
<h2>for loop</h2>
<p>it might get a little annoying having to fill the names every time so we will use a for loop that does it for us</p>
<pre class="hljs"><code>for d in knife2.jpg ; do timeout 25s triangula run -img $d -out j.json ; triangula render -in j.json -out T-${d%%.*} -img $d png ; rm j.json ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135857650-5c00a567-3d1e-43ab-ab05-36f286107611.png" alt="T-knife2"></p>
<p>we applied the name of our input image with the for loop as it was the only image we wanted to convert, since we have an image with <code>.jpg</code> extension and triangula automatically insert png extension to our image name we use <code>${d%%.*}</code> to remove the file extension in the render part and we add a <code>T-</code> before it to differentiate the input and outpot images</p>
<h2>batch converting</h2>
<p>lets convert all of the images in our folder with a one liner</p>
<pre class="hljs"><code>for d in *.jpg ; do timeout 25s triangula run -img $d -out j.json ; triangula render -in j.json -out T-${d%%.*} -img $d png ; rm j.json ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135858663-f03fbfc6-338a-4d76-9f44-7eb855f700bc.png" alt="T-biker"></p>
<p><img src="https://user-images.githubusercontent.com/59083599/135858852-09cb9ff3-ee85-40c0-bb53-dde17caa8b27.png" alt="T-clayP"></p>
<p><img src="https://user-images.githubusercontent.com/59083599/135858902-cf29ac88-70e3-4ac3-9170-ec038266df5b.png" alt="T-stop"></p>
<p><img src="https://user-images.githubusercontent.com/59083599/135858951-dec0df65-6aac-4ea0-a454-cf391022fe96.png" alt="T-umbrella"></p>
<h2>change points/shape numbers</h2>
<p>so far we have been using the default settings, lets change that, we will use <code>-p</code> switch for this</p>
<pre class="hljs"><code>for d in piratesF.jpg ; do timeout 25s triangula run -img $d -out j.json -p 250 ; triangula render -in j.json -out T-${d%%.*} -img $d png ; rm j.json ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135860752-d48bbd75-0a7c-4611-815f-5a1ab017dafa.png" alt="T-piratesF"></p>
<pre class="hljs"><code>for d in match.jpg ; do timeout 25s triangula run -img $d -out j.json -p 1000 ; triangula render -in j.json -out T-${d%%.*} -img $d png ; rm j.json ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135861284-46255a7a-9587-45b5-aaaf-7c789e6f8ad8.png" alt="T-match"></p>
<pre class="hljs"><code>for d in telephone.jpg ; do timeout 60s triangula run -img $d -out j.json -p 2500 ; triangula render -in j.json -out T-${d%%.*} -img $d png ; rm j.json ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135861933-eb68781b-3dbe-4ebe-946f-fe1b68b18d06.png" alt="T-telephone"></p>
<p>notice we had to increase the timeout timer to 60 seconds as we needed more points to calculate/generate</p>
<h2>output svg</h2>
<p>to get svg output instead of png, just omit the png in the command</p>
<pre class="hljs"><code>for d in axe2.jpg ; do timeout 25s triangula run -img $d -out j.json -p 500 ; triangula render -in j.json -out T-${d%%.*} -img $d ; rm j.json ; done
</code></pre>
<h2>use polygans instead of triangles</h2>
<p>we need to insert <code>-s &quot;polygons&quot;</code> in both run and render commands</p>
<pre class="hljs"><code>for d in belt.jpg ; do timeout 25s triangula run -img $d -out j.json -p 1000 -s &quot;polygons&quot; ; triangula render -in j.json -out T-${d%%.*} -img $d -s &quot;polygons&quot; png ; rm j.json ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135863708-3a1fbbf7-73a5-42f7-9b47-4dc1288a80ba.png" alt="T-belt"></p>
<h2>making a animated gif out of an still image</h2>
<p>since there is no randomization with the same shape counts we will iterate thru the shape numbers, starting at 50 shapes and convert a frame every 50 frames, so 50, 100, … 500 shapes</p>
<pre class="hljs"><code>for d in {50..100..50} ; do timeout 20s triangula run -img katana3.jpg -out j.json -p $d ; triangula render -in j.json -out T-$d -img katana3.jpg png ; rm j.json ; done
</code></pre>
<p>mux the images to a gif, because we have both 2 digit and 3 digits numbers and we want to sort them numerically we first use ls in our folder to find every png file and then pipe it to cat and convert it with ffmpeg</p>
<pre class="hljs"><code>ls -v *.png | xargs cat | ffmpeg -framerate 10 -f image2pipe -i - katana.gif
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135897696-1176d7c7-53fb-4563-ad43-92cc94225ad0.gif" alt="katana"></p>
<p>if you want to randomize the frames use this command</p>
<pre class="hljs"><code>for file in T-*.png ; do mv -- &quot;$file&quot; &quot;$(mktemp --dry-run XXXXXX.png)&quot; ; done
</code></pre>
<p><img src="https://user-images.githubusercontent.com/59083599/135898185-d2fdc49a-936c-49c6-925d-44c0db9a93c7.gif" alt="katana++"></p>
<h2>triangulafy a video</h2>
<p>lets apply what we learned to a video, i have made a example of how to download a free video, make image sequence, apply filter and mux it back <a href="https://github.com/junguler/ffmpeg-examples/tree/main/sequence%2C%20manipulate%20%26%20mux%20images">here</a></p>
<pre class="hljs"><code>for d in *.jpg ; do timeout 10s triangula run -img $d -out j.json -p 250 ; triangula render -in j.json -out T-${d%%.*} -img $d png ; rm j.json ; done
</code></pre>
<p>and mux the images</p>
<pre class="hljs"><code>cat T-*.png | ffmpeg -framerate 20 -f image2pipe -i - triangula_lemons.mp4 
</code></pre>

<video controls loop>
    <source src="https://user-images.githubusercontent.com/59083599/135906204-47bb3a61-1cf7-42dc-ad98-999973618fa9.mp4" type="video/mp4">
  </video>

<h2>glitch it</h2>
<p>like i said at the beggining of this page, this program takes an image and makes a json file out of it to produce triangulated images out of, what happens if we supply the same json file over and over for different images? glitch happens</p>
<p>lets use run to make a json file</p>
<pre class="hljs"><code>triangula run -img image.jpg -out g.json -p 500
</code></pre>
<p>now lets loop every image with that same json file</p>
<pre class="hljs"><code>for d in *.jpg ; do triangula render -in g.json -out T-${d%%.*} -img $d png ;  done 
</code></pre>
<p>and mux the images</p>
<pre class="hljs"><code>cat *.png | ffmpeg -framerate 30 -f image2pipe -i - glitch2_dance2.mp4  
</code></pre>

<video controls loop>
    <source src="https://user-images.githubusercontent.com/59083599/135914163-f0f2575c-392c-4569-83c4-10d514ed39cb.mp4" type="video/mp4">
  </video>

<p id="down"></p>

<br><br><br>
<footer class="footer2">
    Page is converted from markdown to html by Markdown-it, Look <a class="linkyel" href="https://markdown-it.github.io/"">here</a>  for more information
</footer>

<a class="up" href="#"><img src="../stuff/up.png"></a>

<a class="down" href="#down"><img src="../stuff/down.png"></a>